// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Message {
  author  String
  channel String
  guild   String
  message String @id
  thread String?

  starboardOriginal Starboard? @relation("original")
  starboardPinned Starboard? @relation("pinned")
}

model Starboard {
  original Message @relation(fields: [originalId], name: "original", references: [message])
  originalId String @unique
  pinned Message @relation(fields: [pinnedId], name: "pinned", references: [message])
  pinnedId   String @id
}

enum ConfigurationKey {
  StarboardChannel
  StarboardCount
}

model Configuration {
  guild String
  property ConfigurationKey
  value String

  @@id([guild, property])
}
