generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Message {
  author            String
  channel           String
  guild             String
  message           String     @id
  thread            String?
  starboardOriginal Starboard? @relation("original")
  starboardPinned   Starboard? @relation("pinned")
}

model Starboard {
  originalId String  @unique
  pinnedId   String  @id
  original   Message @relation("original", fields: [originalId], references: [message])
  pinned     Message @relation("pinned", fields: [pinnedId], references: [message])
}

model Configuration {
  guild    String
  property ConfigurationKey
  value    String

  @@id([guild, property])
}

model TwitchFollows {
  channel  String
  mentions Json?
  guild    String
  user     String

  @@id([channel, user])
}

enum ConfigurationKey {
  StarboardChannel
  StarboardCount
}
